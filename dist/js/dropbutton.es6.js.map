{"version":3,"file":"js/dropbutton.es6.js","mappings":"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","sources":["webpack://gesso/external var \"Drupal\"","webpack://gesso/external var \"jQuery\"","webpack://gesso/external var \"once\"","webpack://gesso/webpack/bootstrap","webpack://gesso/webpack/runtime/compat get default export","webpack://gesso/webpack/runtime/define property getters","webpack://gesso/webpack/runtime/hasOwnProperty shorthand","webpack://gesso/webpack/runtime/make namespace object","webpack://gesso/./source/03-components/dropbutton/dropbutton.es6.js"],"sourcesContent":["module.exports = Drupal;","module.exports = jQuery;","module.exports = once;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import jQuery from 'jquery';\nimport Drupal from 'drupal';\nimport once from 'once';\n\n/**\n * @file\n * Dropbutton feature.\n */\n\n(function initDropbutton($) {\n  /**\n   * Delegated callback for opening and closing dropbutton secondary actions.\n   *\n   * @function Drupal.DropButton~dropbuttonClickHandler\n   *\n   * @param {jQuery.Event} e\n   *   The event triggered.\n   */\n  function dropbuttonClickHandler(e) {\n    e.preventDefault();\n    $(e.target).closest('.js-dropbutton').toggleClass('is-open');\n  }\n\n  /**\n   * A DropButton presents an HTML list as a button with a primary action.\n   *\n   * All secondary actions beyond the first in the list are presented in a\n   * dropdown list accessible through a toggle arrow associated with the button.\n   *\n   * @constructor Drupal.DropButton\n   *\n   * @param {HTMLElement} dropbutton\n   *   A DOM element.\n   * @param {object} settings\n   *   A list of options including:\n   * @param {string} settings.title\n   *   The text inside the toggle link element. This text is hidden\n   *   from visual UAs.\n   */\n  function DropButton(dropbutton, settings = {}) {\n    // Merge defaults with settings.\n    const options = $.extend(\n      { title: Drupal.t('List additional actions') },\n      settings\n    );\n    const $dropbutton = $(dropbutton);\n\n    /**\n     * @type {jQuery}\n     */\n    this.$dropbutton = $dropbutton;\n\n    /**\n     * @type {jQuery}\n     */\n    this.$list = $dropbutton.find('.js-dropbutton-list');\n\n    /**\n     * Find actions and mark them.\n     *\n     * @type {jQuery}\n     */\n    this.$actions = this.$list.find('li');\n\n    // Add the special dropdown only if there are hidden actions.\n    if (this.$actions.length > 1) {\n      // Identify the first element of the collection.\n      const $primary = this.$actions.slice(0, 1);\n      $primary.addClass('is-action');\n      // Identify the secondary actions.\n      const $secondary = this.$actions.slice(1);\n      $secondary.addClass('is-secondary-action');\n      // Add toggle link.\n      $primary.after(Drupal.theme('dropbuttonToggle', options));\n      // Bind mouse events.\n      this.$dropbutton.addClass('has-multiple').on({\n        /**\n         * Adds a timeout to close the dropdown on mouseleave.\n         *\n         * @ignore\n         */\n        'mouseleave.dropbutton': $.proxy(this.hoverOut, this),\n\n        /**\n         * Clears timeout when mouseout of the dropdown.\n         *\n         * @ignore\n         */\n        'mouseenter.dropbutton': $.proxy(this.hoverIn, this),\n\n        /**\n         * Similar to mouseleave/mouseenter, but for keyboard navigation.\n         *\n         * @ignore\n         */\n        'focusout.dropbutton': $.proxy(this.focusOut, this),\n\n        /**\n         * @ignore\n         */\n        'focusin.dropbutton': $.proxy(this.focusIn, this),\n      });\n    } else {\n      this.$dropbutton.addClass('is-single');\n    }\n  }\n\n  /**\n   * Extend the DropButton constructor.\n   */\n  $.extend(\n    DropButton,\n    /** @lends Drupal.DropButton */ {\n      /**\n       * Store all processed DropButtons.\n       *\n       * @type {Array.<Drupal.DropButton>}\n       */\n      dropbuttons: [],\n    }\n  );\n\n  /**\n   * Extend the DropButton prototype.\n   */\n  $.extend(\n    DropButton.prototype,\n    /** @lends Drupal.DropButton# */ {\n      /**\n       * Toggle the dropbutton open and closed.\n       *\n       * @param {boolean} [show]\n       *   Force the dropbutton to open by passing true or to close by\n       *   passing false.\n       */\n      toggle(show) {\n        const isBool = typeof show === 'boolean';\n        const openButton = isBool\n          ? show\n          : !this.$dropbutton.hasClass('is-open');\n        this.$dropbutton.toggleClass('is-open', openButton);\n      },\n\n      /**\n       * @method\n       */\n      hoverIn() {\n        // Clear any previous timer we were using.\n        if (this.timerID) {\n          window.clearTimeout(this.timerID);\n        }\n      },\n\n      /**\n       * @method\n       */\n      hoverOut() {\n        // Wait half a second before closing.\n        this.timerID = window.setTimeout($.proxy(this, 'close'), 500);\n      },\n\n      /**\n       * @method\n       */\n      open() {\n        this.toggle(true);\n      },\n\n      /**\n       * @method\n       */\n      close() {\n        this.toggle(false);\n      },\n\n      /**\n       * @param {jQuery.Event} e\n       *   The event triggered.\n       */\n      focusOut(e) {\n        this.hoverOut.call(this, e);\n      },\n\n      /**\n       * @param {jQuery.Event} e\n       *   The event triggered.\n       */\n      focusIn(e) {\n        this.hoverIn.call(this, e);\n      },\n    }\n  );\n\n  $.extend(\n    Drupal.theme,\n    /** @lends Drupal.theme */ {\n      /**\n       * A toggle is an interactive element often bound to a click handler.\n       *\n       * @param {object} options\n       *   Options object.\n       * @param {string} [options.title]\n       *   The HTML anchor title attribute and text for the inner span element.\n       *\n       * @return {string}\n       *   A string representing a DOM fragment.\n       */\n      dropbuttonToggle(options) {\n        return `<li class=\"c-dropbutton__toggle\"><button class=\"c-dropbutton__toggle-button\" type=\"button\"><span class=\"u-visually-hidden\">${options.title}</span></button></li>`;\n      },\n    }\n  );\n\n  // Expose constructor in the public space.\n  Drupal.DropButton = DropButton;\n\n  /**\n   * Process elements with the .dropbutton class on page load.\n   *\n   * @type {Drupal~behavior}\n   *\n   * @prop {Drupal~behaviorAttach} attach\n   *   Attaches dropButton behaviors.\n   */\n  Drupal.behaviors.dropButton = {\n    attach(context, settings) {\n      const options = $.extend({ dropbutton: {} }, settings);\n      const dropbuttons = once('dropbutton', '.js-dropbutton', context);\n      if (dropbuttons.length) {\n        // Adds the delegated handler that will toggle dropdowns on click.\n        once('dropbuttonClick', 'body', context).forEach(bodyElem => {\n          const $body = $(bodyElem);\n          if ($body.length) {\n            $body.on('click', '.c-dropbutton__toggle', dropbuttonClickHandler);\n          }\n          // Initialize all buttons.\n          const il = dropbuttons.length;\n          for (let i = 0; i < il; i += 1) {\n            DropButton.dropbuttons.push(\n              new DropButton(dropbuttons[i], options.dropbutton)\n            );\n          }\n        });\n      }\n    },\n  };\n})(jQuery);\n"],"names":["jQuery","Drupal","once","initDropbutton","$","dropbuttonClickHandler","e","preventDefault","target","closest","toggleClass","DropButton","dropbutton","settings","options","extend","title","t","$dropbutton","$list","find","$actions","length","$primary","slice","addClass","$secondary","after","theme","on","proxy","hoverOut","hoverIn","focusOut","focusIn","dropbuttons","prototype","toggle","show","isBool","openButton","hasClass","timerID","window","clearTimeout","setTimeout","open","close","call","dropbuttonToggle","behaviors","dropButton","attach","context","forEach","bodyElem","$body","il","i","push"],"sourceRoot":""}
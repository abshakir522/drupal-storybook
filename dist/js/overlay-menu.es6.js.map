{"version":3,"file":"js/overlay-menu.es6.js","mappings":"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","sources":["webpack://gesso/./source/03-components/overlay-menu/modules/_OverlayMenu.es6.js","webpack://gesso/external var \"Drupal\"","webpack://gesso/webpack/bootstrap","webpack://gesso/webpack/runtime/compat get default export","webpack://gesso/webpack/runtime/define property getters","webpack://gesso/webpack/runtime/hasOwnProperty shorthand","webpack://gesso/webpack/runtime/make namespace object","webpack://gesso/./source/03-components/overlay-menu/overlay-menu.es6.js"],"sourcesContent":["class OverlayMenu {\n  /**\n   * @constructor\n   * @param {HTMLElement} domNode - The top-level menu node\n   * @param {HTMLElement|null} menuButton - The open menu button\n   * @param {HTMLElement|null} closeButton - The close button toggle\n   */\n  constructor(domNode, { menuButton = null, closeButton = null } = {}) {\n    this.overlay = domNode;\n    this.menuButton = menuButton;\n    this.closeButton = closeButton;\n    this.handleKeydown = this.handleKeydown.bind(this);\n  }\n\n  /**\n   * Create a menu toggle button.\n   * @return {HTMLElement}\n   */\n  createMenuButton() {\n    const menuButton = document.createElement('button');\n    menuButton.classList.add('c-hamburger-button', 'c-hamburger-button--menu');\n    menuButton.setAttribute('aria-controls', this.overlay.id);\n    menuButton.setAttribute('aria-expanded', 'false');\n    menuButton.innerHTML = '<span class=\"c-hamburger-button__icon\">Menu</span>';\n    return this.overlay.insertAdjacentElement('beforebegin', menuButton);\n  }\n\n  createCloseButton() {\n    const menuButton = document.createElement('button');\n    menuButton.classList.add('c-hamburger-button', 'c-hamburger-button--close');\n    menuButton.setAttribute('aria-controls', this.overlay.id);\n    menuButton.setAttribute('aria-expanded', 'true');\n    menuButton.innerHTML = '<span class=\"c-hamburger-button__icon\">Close</span>';\n    menuButton.hidden = true;\n    return this.overlay.insertAdjacentElement('afterbegin', menuButton);\n  }\n\n  /**\n   * Close the overlay.\n   * @return void\n   */\n  closeMenu() {\n    this.menuButton.hidden = false;\n    this.menuButton.setAttribute('aria-expanded', 'false');\n    this.closeButton.hidden = true;\n    this.closeButton.setAttribute('aria-expanded', 'false');\n    this.overlay.classList.remove('is-open');\n    document.body.classList.remove('has-open-menu');\n    window.removeEventListener('keydown', this.handleKeydown);\n    this.disableTab(this.overlay);\n  }\n\n  /**\n   * Open the overlay.\n   * @return void\n   */\n  openMenu() {\n    this.menuButton.hidden = true;\n    this.menuButton.setAttribute('aria-expanded', 'true');\n    this.closeButton.hidden = false;\n    this.closeButton.setAttribute('aria-expanded', 'true');\n    this.overlay.classList.add('is-open');\n    document.body.classList.add('has-open-menu');\n    window.addEventListener('keydown', this.handleKeydown);\n    this.enableTab(this.overlay);\n  }\n\n  /**\n   * Close the menu if open and vice-versa.\n   * @return void\n   */\n  toggleMenu() {\n    if (this.menuButton.getAttribute('aria-expanded') !== 'true') {\n      this.openMenu();\n    } else {\n      this.closeMenu();\n    }\n  }\n\n  /**\n   * Handle clicks on menu button toggle.\n   * @param {MouseEvent<HTMLButtonElement>} event - The click event.\n   * @return void\n   */\n  handleButtonClick(event) {\n    event.preventDefault();\n    this.toggleMenu();\n  }\n\n  /**\n   * Handle keydown events.\n   * @param {KeyboardEvent} event - The keydown event\n   * @return void\n   */\n  handleKeydown(event) {\n    if (event.key === 'Escape') {\n      this.closeMenu();\n    }\n    // Keep the user from tabbing out of the menu.\n    const focusable = Array.from(\n      this.overlay.querySelectorAll('button, [href], input, select, textarea')\n    ).filter(item => item.tabIndex !== -1);\n    const numberFocusElements = focusable.length;\n    const firstFocusableElement = focusable[0];\n    const lastFocusableElement = focusable[numberFocusElements - 1];\n    if (event.key === 'Tab') {\n      if (event.shiftKey && document.activeElement === firstFocusableElement) {\n        event.preventDefault();\n        lastFocusableElement.focus();\n      } else if (\n        document.activeElement === lastFocusableElement &&\n        !event.shiftKey\n      ) {\n        event.preventDefault();\n        firstFocusableElement.focus();\n      }\n    }\n  }\n\n  /**\n   * Disable tab on all menu links. This is to ensure hidden items\n   * do not still receive tab focus.\n   */\n  disableTab(startingPoint) {\n    const menuLinks = startingPoint.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]'\n    );\n    menuLinks.forEach(link => {\n      link.setAttribute('tabindex', '-1');\n    });\n  }\n\n  /**\n   * Enable tabbing on all menu links.\n   */\n  enableTab(startingPoint) {\n    const menuLinks = Array.from(\n      startingPoint.querySelectorAll(\n        'button, [href], input, select, textarea, [tabindex]'\n      )\n    ).filter(elem => window.getComputedStyle(elem).display !== 'none');\n    menuLinks.forEach(link => {\n      link.setAttribute('tabindex', '0');\n    });\n  }\n\n  /**\n   * Initialize the overlay menu.\n   * @return void\n   */\n  init() {\n    if (!this.menuButton) {\n      this.menuButton = this.createMenuButton();\n    }\n    this.menuButton.addEventListener(\n      'click',\n      this.handleButtonClick.bind(this)\n    );\n    if (!this.closeButton) {\n      this.closeButton = this.createCloseButton();\n    }\n    this.closeButton.addEventListener(\n      'click',\n      this.handleButtonClick.bind(this)\n    );\n    this.disableTab(this.overlay);\n  }\n}\n\nexport default OverlayMenu;\n","module.exports = Drupal;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Drupal from 'drupal';\nimport OverlayMenu from './modules/_OverlayMenu.es6';\n\nDrupal.behaviors.overlayMenu = {\n  attach(context) {\n    const menus = context.querySelectorAll('.c-overlay-menu');\n    if (menus.length) {\n      menus.forEach(menu => {\n        const overlayMenu = new OverlayMenu(menu);\n        overlayMenu.init();\n      });\n    }\n  },\n};\n"],"names":["OverlayMenu","constructor","domNode","menuButton","closeButton","overlay","handleKeydown","bind","createMenuButton","document","createElement","classList","add","setAttribute","id","innerHTML","insertAdjacentElement","createCloseButton","hidden","closeMenu","remove","body","window","removeEventListener","disableTab","openMenu","addEventListener","enableTab","toggleMenu","getAttribute","handleButtonClick","event","preventDefault","key","focusable","Array","from","querySelectorAll","filter","item","tabIndex","numberFocusElements","length","firstFocusableElement","lastFocusableElement","shiftKey","activeElement","focus","startingPoint","menuLinks","forEach","link","elem","getComputedStyle","display","init","Drupal","behaviors","overlayMenu","attach","context","menus","menu"],"sourceRoot":""}